<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Login | Shopease</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

<style>
/* ===== YOUR STYLES (UNCHANGED) ===== */
:root{
  --glass-bg: rgba(255,255,255,0.06);
  --glass-border: rgba(255,255,255,0.12);
  --accent: #27a8ff;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui;color:#e9f5fb}
body{
  background:url("https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?q=80&w=1920") center/cover;
  display:flex;align-items:center;justify-content:flex-end;padding:36px;
}
body::before{
  content:"";position:fixed;inset:0;
  background:linear-gradient(180deg,rgba(0,12,20,.18),rgba(0,0,0,.45));
}
.auth-card{
  width:360px;padding:22px;border-radius:16px;
  background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));
  backdrop-filter:blur(8px);
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 10px 40px rgba(2,6,20,.55);
}
.tabs-wrap{position:relative;padding-bottom:14px}
.tabs{display:flex;gap:18px}
.tab{cursor:pointer;font-weight:600;padding:10px 6px}
.tab.inactive{opacity:.6}
.underline{position:absolute;bottom:6px;height:3px;background:#27a8ff;border-radius:3px}
.heading{font-size:18px;margin-bottom:10px}
.form-area{position:relative;height:320px}
.form-panel{position:absolute;inset:0}
.field{margin:12px 0}
.input{
  width:100%;padding:12px;border-radius:10px;
  background:rgba(255,255,255,.03);
  border:1px solid rgba(255,255,255,.06);
  color:white;
}
.btn{
  width:100%;margin-top:16px;padding:12px;
  border-radius:12px;border:0;
  background:linear-gradient(90deg,#1ea8ff,#2796ff);
  color:white;font-weight:700;cursor:pointer;
}
.footer-text{text-align:center;margin-top:10px;font-size:13px}
.show-hide{position:absolute;right:12px;top:12px;cursor:pointer}
</style>
</head>

<body>

<div class="auth-card">

  <div class="tabs-wrap">
    <div class="tabs">
      <div id="tabSignin" class="tab active">Sign in</div>
      <div id="tabSignup" class="tab inactive">Sign up</div>
    </div>
    <div id="underline" class="underline"></div>
  </div>

  <div id="headingText" class="heading">
    Welcome back! Please login to your account
  </div>

  <div class="form-area">

    <!-- SIGN IN -->
    <div id="panelSignin" class="form-panel">
      <div class="field">
        <input id="si_email" class="input" type="email" placeholder="Email">
      </div>
      <div class="field" style="position:relative">
        <input id="si_password" class="input" type="password" placeholder="Password">
        <span id="si_toggle" class="show-hide"><i class="fa fa-eye-slash"></i></span>
      </div>
      <button id="btnSignin" class="btn">Login</button>
      <div class="footer-text">
        Donâ€™t have an account? <a href="#" id="toSignup">Sign up</a>
      </div>
    </div>

    <!-- SIGN UP -->
    <form id="signupForm" class="form-panel" style="display:none">
      <div class="field">
        <input id="su_name" class="input" placeholder="Full Name">
      </div>
      <div class="field">
        <input id="su_email" class="input" type="email" placeholder="Email">
      </div>
      <div class="field" style="position:relative">
        <input id="su_pass" class="input" type="password" placeholder="Password">
        <span id="su_toggle" class="show-hide"><i class="fa fa-eye-slash"></i></span>
      </div>
      <button class="btn">Sign up</button>
      <div class="footer-text">
        Already have an account? <a href="#" id="toSignin">Sign in</a>
      </div>
    </form>

  </div>
</div>

<!-- LOADER -->
<div id="loaderOverlay" style="
  position:fixed;inset:0;
  background:rgba(0,0,0,.55);
  display:none;align-items:center;justify-content:center;
">
  <div style="
    width:60px;height:60px;border-radius:50%;
    border:4px solid rgba(255,255,255,.3);
    border-top-color:#27a8ff;
    animation:spin 1s linear infinite">
  </div>
</div>

<script>
const tabSignin = document.getElementById("tabSignin");
const tabSignup = document.getElementById("tabSignup");
const panelSignin = document.getElementById("panelSignin");
const signupForm = document.getElementById("signupForm");
const underline = document.getElementById("underline");
const headingText = document.getElementById("headingText");
const loader = document.getElementById("loaderOverlay");

/* underline */
function moveUnderline(tab){
  const r = tab.getBoundingClientRect();
  const p = tab.parentElement.getBoundingClientRect();
  underline.style.left = (r.left - p.left) + "px";
  underline.style.width = r.width + "px";
}

/* switch */
function showSignin(){
  panelSignin.style.display="block";
  signupForm.style.display="none";
  headingText.textContent="Welcome back! Please login to your account";
  moveUnderline(tabSignin);
}
function showSignup(){
  panelSignin.style.display="none";
  signupForm.style.display="block";
  headingText.textContent="Create your account to start shopping";
  moveUnderline(tabSignup);
}

tabSignin.onclick=showSignin;
tabSignup.onclick=showSignup;
toSignup.onclick=e=>{e.preventDefault();showSignup()}
toSignin.onclick=e=>{e.preventDefault();showSignin()}

/* password toggle */
function toggle(inp,btn){
  btn.onclick=()=>inp.type=inp.type==="password"?"text":"password";
}
toggle(si_password,si_toggle);
toggle(su_pass,su_toggle);

/* loader */
const showLoader=()=>loader.style.display="flex";
const hideLoader=()=>loader.style.display="none";

/* LOGIN */
btnSignin.onclick=async()=>{
  showLoader();
  const res=await fetch("http://localhost:5000/api/auth/login",{
    method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({email:si_email.value,password:si_password.value})
  });
  const d=await res.json();
  hideLoader();
  if(!res.ok) return alert(d.msg);
  localStorage.setItem("token",d.token);
  location.href="profile.html";
};

/* SIGNUP + AUTO LOGIN */
signupForm.onsubmit=async e=>{
  e.preventDefault();
  showLoader();
  await fetch("http://localhost:5000/api/auth/signup",{
    method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      name:su_name.value,
      email:su_email.value,
      password:su_pass.value
    })
  });
  const r=await fetch("http://localhost:5000/api/auth/login",{
    method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({email:su_email.value,password:su_pass.value})
  });
  const d=await r.json();
  hideLoader();
  localStorage.setItem("token",d.token);
  location.href="profile.html";
};

window.onload=()=>moveUnderline(tabSignin);
</script>

</body>
</html>
